(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[799],{5649:(e,r,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/test-dashboard",function(){return a(9859)}])},7931:(e,r,a)=>{"use strict";a.d(r,{N:()=>o});var t=a(6879);let s="https://poceyfalttikstlruoet.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBvY2V5ZmFsdHRpa3N0bHJ1b2V0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQzODMzNTAsImV4cCI6MjA1OTk1OTM1MH0.yEz143laLLL9mmLkiw1n0Ou9ALAaf95naxv3H-bmV3I";if(!s||!n)throw Error("Missing Supabase environment variables");let o=(0,t.UU)(s,n)},9859:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>eN});var t=a(7876),s=a(4232),n=a(7232);let o=["API","Database","Auth Service","Supabase","OpenAI","Anthropic"],i=n.Ay.div.withConfig({componentId:"sc-50fda277-0"})(["display:grid;gap:var(--spacing-md,1rem);"]),c=n.Ay.div.withConfig({componentId:"sc-50fda277-1"})(["display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:var(--spacing-md,1rem);padding:var(--spacing-sm,0.5rem) var(--spacing-md,1rem);background:var(--bg-secondary,#F9FAFB);border-radius:6px;border:1px solid var(--border-color,#E5E7EB);"]),d=n.Ay.span.withConfig({componentId:"sc-50fda277-2"})(["font-weight:500;color:var(--text-primary,#1F2937);"]),l=n.Ay.span.withConfig({componentId:"sc-50fda277-3"})(["font-size:0.875rem;color:var(--text-secondary,#6B7280);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),u=n.Ay.span.withConfig({componentId:"sc-50fda277-4"})(["padding:0.25rem 0.75rem;border-radius:9999px;font-size:0.8rem;font-weight:500;text-transform:uppercase;white-space:nowrap;background:",";color:",";"],e=>{switch(e.$status){case"up":return"#DEF7EC";case"down":case"error":return"#FDE8E8";case"checking":return"#E0E7FF";default:return"var(--bg-secondary, #F9FAFB)"}},e=>{switch(e.$status){case"up":return"#03543F";case"down":case"error":return"#9B1C1C";case"checking":return"#3730A3";default:return"var(--text-secondary, #6B7280)"}}),m=n.Ay.div.withConfig({componentId:"sc-50fda277-5"})(["width:16px;height:16px;border:2px solid rgba(59,130,246,0.2);border-radius:50%;border-top-color:var(--color-primary,#3B82F6);animation:spin 1s ease-in-out infinite;@keyframes spin{to{transform:rotate(360deg);}}"]),p=async e=>(await new Promise(e=>setTimeout(e,500+1e3*Math.random())),Math.random()>.2)?{status:"up",message:"Connected successfully"}:"Supabase"===e&&Math.random()>.5?{status:"error",message:"Connection failed: Invalid API key"}:{status:"down",message:"Service unreachable"};function g(){let[e,r]=(0,s.useState)(()=>o.map(e=>({name:e,status:"checking",message:"Initiating check..."})));return(0,s.useEffect)(()=>{(async()=>{let a=e.map(async(e,a)=>{if("checking"===e.status)try{let t=await p(e.name);r(e=>{let r=[...e];return r[a]={...r[a],...t,lastChecked:new Date},r})}catch(e){r(e=>{let r=[...e];return r[a]={...r[a],status:"error",message:"Check failed unexpectedly",lastChecked:new Date},r})}});await Promise.allSettled(a)})()},[]),(0,t.jsx)(i,{children:e.map(e=>(0,t.jsxs)(c,{children:[(0,t.jsx)(d,{children:e.name}),(0,t.jsx)(l,{title:e.message,children:e.message}),(0,t.jsx)(u,{$status:e.status,children:"checking"===e.status?(0,t.jsx)(m,{}):e.status})]},e.name))})}let h=n.Ay.div.withConfig({componentId:"sc-487052cb-0"})(["display:grid;gap:var(--spacing-lg,1.5rem);"]),b=n.Ay.div.withConfig({componentId:"sc-487052cb-1"})(["display:flex;flex-wrap:wrap;gap:var(--spacing-md,1rem);"]),f=n.Ay.button.withConfig({componentId:"sc-487052cb-2"})(["padding:var(--spacing-sm,0.5rem) var(--spacing-md,1rem);background:var(--color-primary,#3B82F6);color:white;border:none;border-radius:0.375rem;font-weight:500;font-size:0.9rem;cursor:pointer;transition:all var(--transition-fast,150ms ease);position:relative;&:hover{opacity:0.9;}&:disabled{opacity:0.5;cursor:not-allowed;color:transparent;}&:disabled::after{content:'Testing...';position:absolute;left:0;right:0;top:var(--spacing-sm,0.5rem);color:white;}"]),x=n.Ay.div.withConfig({componentId:"sc-487052cb-3"})(["padding:var(--spacing-md,1rem);border-radius:6px;background:var(--bg-secondary,#F9FAFB);border:1px solid var(--border-color,#E5E7EB);font-size:0.875rem;min-height:100px;"]),v=n.Ay.h4.withConfig({componentId:"sc-487052cb-4"})(["font-weight:600;margin-bottom:var(--spacing-sm,0.5rem);color:",";"],e=>e.color||"inherit"),y=n.Ay.pre.withConfig({componentId:"sc-487052cb-5"})(["background:var(--bg-primary,white);padding:var(--spacing-sm,0.5rem);border-radius:4px;border:1px solid var(--border-color,#E5E7EB);overflow-x:auto;white-space:pre-wrap;font-family:var(--font-mono,monospace);font-size:0.8rem;color:var(--text-secondary,#6B7280);"]),w=e=>{let{onTest:r}=e,[a,n]=(0,s.useState)(null),[o,i]=(0,s.useState)(null),c=async e=>{i(e),n(null);try{let a={type:e,data:{email:["signup","login","reset"].includes(e)?"test@example.com":void 0,password:["signup","login"].includes(e)?"TestPass123!":void 0}},t=await r(a);"session"===e&&t.success&&(t.data={user:{id:"uuid-test-user",email:"test@example.com",role:"authenticated"},session:{access_token:"mock_jwt_token_very_long...",expires_in:3600,token_type:"bearer"},cookies:"Set-Cookie: sb-test-token=...; Path=/; HttpOnly; SameSite=Lax"}),n(t)}catch(e){n({success:!1,message:e instanceof Error?e.message:"Auth test failed unexpectedly"})}finally{i(null)}};return(0,t.jsxs)(h,{children:[(0,t.jsxs)(b,{children:[(0,t.jsx)(f,{onClick:()=>c("signup"),disabled:!!o,children:"Test Sign Up"}),(0,t.jsx)(f,{onClick:()=>c("login"),disabled:!!o,children:"Test Sign In"}),(0,t.jsx)(f,{onClick:()=>c("logout"),disabled:!!o,children:"Test Logout"}),(0,t.jsx)(f,{onClick:()=>c("reset"),disabled:!!o,children:"Test Password Reset"}),(0,t.jsx)(f,{onClick:()=>c("session"),disabled:!!o,children:"View Session Info"})]}),(0,t.jsx)(x,{children:o?(0,t.jsxs)("p",{children:["Running ",o," test..."]}):(()=>{if(!a)return(0,t.jsx)("p",{children:"Run a test to see the results."});let e=a.data?(0,t.jsx)(y,{children:JSON.stringify(a.data,null,2)}):null;return(0,t.jsxs)(s.Fragment,{children:[(0,t.jsx)(v,{color:a.success?"var(--color-secondary, green)":"red",children:a.success?"✅ Test Passed":"❌ Test Failed"}),(0,t.jsx)("p",{children:a.message}),e]})})()})]})};var A=a(320),E=a(3999),I=a(2753),C=a(4713);let j=[{id:"tool-chatgpt",name:"ChatGPT",description:"AI language model for conversation and text generation.",tags:["llm","text","openai"]},{id:"tool-uxpilot",name:"UX-Pilot",description:"AI tool for generating user flows and UX analysis.",tags:["ux","design","analysis"]},{id:"tool-runway",name:"RunwayML",description:"AI platform for video editing and generation.",tags:["video","creative","genai"]}],T=n.Ay.div.withConfig({componentId:"sc-5499c4e4-0"})(["display:grid;gap:var(--spacing-lg,1.5rem);"]),k=n.Ay.div.withConfig({componentId:"sc-5499c4e4-1"})(["display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:var(--spacing-md,1rem);"]),F=n.Ay.div.withConfig({componentId:"sc-5499c4e4-2"})(["border:1px solid var(--border-color,#E5E7EB);border-radius:6px;padding:var(--spacing-md,1rem);background:var(--bg-primary,white);box-shadow:var(--shadow-sm,0 1px 2px 0 rgba(0,0,0,0.05));display:flex;flex-direction:column;gap:var(--spacing-sm,0.5rem);"]),S=n.Ay.h5.withConfig({componentId:"sc-5499c4e4-3"})(["font-weight:600;font-size:1rem;color:var(--text-primary,#1F2937);"]),N=n.Ay.p.withConfig({componentId:"sc-5499c4e4-4"})(["font-size:0.875rem;color:var(--text-secondary,#6B7280);flex-grow:1;"]),_=n.Ay.div.withConfig({componentId:"sc-5499c4e4-5"})(["display:flex;flex-wrap:wrap;gap:var(--spacing-xs,0.25rem);"]),B=n.Ay.span.withConfig({componentId:"sc-5499c4e4-6"})(["background-color:var(--bg-secondary,#F9FAFB);color:var(--text-secondary,#6B7280);padding:0.1rem 0.5rem;border-radius:99px;font-size:0.75rem;border:1px solid var(--border-color,#E5E7EB);"]),R=n.Ay.div.withConfig({componentId:"sc-5499c4e4-7"})(["display:flex;gap:var(--spacing-sm,0.5rem);margin-top:var(--spacing-sm,0.5rem);"]),O=n.Ay.button.withConfig({componentId:"sc-5499c4e4-8"})(["padding:0.3rem 0.6rem;background:var(--bg-secondary,#F9FAFB);color:var(--color-primary,#3B82F6);border:1px solid var(--border-color,#E5E7EB);border-radius:0.375rem;font-weight:500;font-size:0.8rem;cursor:pointer;transition:all var(--transition-fast,150ms ease);flex-grow:1;&:hover{background-color:#E5E7EB;}&:disabled{opacity:0.5;cursor:not-allowed;}"]),U=n.Ay.div.withConfig({componentId:"sc-5499c4e4-9"})(["display:flex;gap:var(--spacing-md,1rem);align-items:center;border-top:1px solid var(--border-color,#E5E7EB);padding-top:var(--spacing-lg,1.5rem);"]),L=n.Ay.input.withConfig({componentId:"sc-5499c4e4-10"})(["padding:var(--spacing-sm,0.5rem);border:1px solid var(--border-color,#D1D5DB);border-radius:0.375rem;font-size:0.875rem;background-color:var(--bg-primary,white);color:var(--text-primary,#1F2937);flex-grow:1;&:focus{outline:none;border-color:var(--color-primary,#3B82F6);box-shadow:0 0 0 2px rgba(59,130,246,0.1);}"]),P=n.Ay.button.withConfig({componentId:"sc-5499c4e4-11"})(["padding:var(--spacing-sm,0.5rem) var(--spacing-md,1rem);background:var(--color-primary,#3B82F6);color:white;border:none;border-radius:0.375rem;font-weight:500;font-size:0.9rem;cursor:pointer;transition:all var(--transition-fast,150ms ease);position:relative;white-space:nowrap;&:hover{opacity:0.9;}&:disabled{opacity:0.5;cursor:not-allowed;color:transparent;}&:disabled::after{content:'Testing...';position:absolute;inset:0;display:flex;align-items:center;justify-content:center;color:white;}"]),z=n.Ay.div.withConfig({componentId:"sc-5499c4e4-12"})(["  padding:var(--spacing-md,1rem);border-radius:6px;background:var(--bg-secondary,#F9FAFB);border:1px solid var(--border-color,#E5E7EB);font-size:0.875rem;min-height:100px;"]),D=n.Ay.h4.withConfig({componentId:"sc-5499c4e4-13"})(["  font-weight:600;margin-bottom:var(--spacing-sm,0.5rem);color:",";"],e=>e.color||"inherit"),M=n.Ay.pre.withConfig({componentId:"sc-5499c4e4-14"})(["  background:var(--bg-primary,white);padding:var(--spacing-sm,0.5rem);border-radius:4px;border:1px solid var(--border-color,#E5E7EB);overflow-x:auto;white-space:pre-wrap;word-wrap:break-word;font-family:var(--font-mono,monospace);font-size:0.8rem;color:var(--text-secondary,#6B7280);"]);function X(e){let{onTest:r}=e,[a,n]=(0,s.useState)(null),[o,i]=(0,s.useState)(null),[c,d]=(0,s.useState)(""),l=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(e+JSON.stringify(a)),n(null);try{let t=await r({type:e,params:a});if(t.success){if("saveUserStack"===e)t.data={saved:!0,userId:"mock-user-id",tool:a.toolName};else if("saveAnonStack"===e)t.data={saved:!0,sessionId:"mock-session-id-123",tool:a.toolName};else if("searchTool"===e){let e=j.filter(e=>e.tags.includes(a.tag));t.data=e,t.message=e.length>0?"Found ".concat(e.length," tools with tag '").concat(a.tag,"'."):"No tools found for tag '".concat(a.tag,"'.")}}n(t)}catch(r){n({success:!1,message:r instanceof Error?r.message:"Tool Stack test (".concat(e,") failed unexpectedly")})}finally{i(null)}};return(0,t.jsxs)(T,{children:[(0,t.jsx)(k,{children:j.map(e=>(0,t.jsxs)(F,{children:[(0,t.jsx)(S,{children:e.name}),(0,t.jsx)(N,{children:e.description}),(0,t.jsx)(_,{children:e.tags.map(e=>(0,t.jsx)(B,{children:e},e))}),(0,t.jsxs)(R,{children:[(0,t.jsx)(O,{onClick:()=>l("saveUserStack",{toolName:e.name}),disabled:!!o,children:"Save (User)"}),(0,t.jsx)(O,{onClick:()=>l("saveAnonStack",{toolName:e.name}),disabled:!!o,children:"Save (Anon)"})]})]},e.id))}),(0,t.jsxs)(U,{as:"form",onSubmit:e=>{e.preventDefault(),c.trim()&&l("searchTool",{tag:c.trim().toLowerCase()})},children:[(0,t.jsx)(L,{type:"text",placeholder:"Search tool by tag (e.g., llm, video)",value:c,onChange:e=>d(e.target.value),disabled:!!o}),(0,t.jsx)(P,{type:"submit",disabled:!!o||!c.trim(),children:"Search"})]}),(0,t.jsx)(z,{children:o?(0,t.jsx)("p",{children:"Performing action..."}):(()=>{if(!a)return(0,t.jsx)("p",{children:"Perform an action (Save, Search) to see results."});let e=a.data?JSON.stringify(a.data,null,2):"No additional data.",r=(0,t.jsx)(M,{children:e});return(0,t.jsxs)(s.Fragment,{children:[(0,t.jsx)(D,{color:a.success?"var(--color-secondary, green)":"red",children:a.success?"✅ Action Succeeded":"❌ Action Failed"}),(0,t.jsx)("p",{children:a.message}),r]})})()})]})}let G=[{id:"badge_quiz_complete",name:"Quiz Whiz",description:"Completed the Readiness Quiz."},{id:"badge_first_role",name:"Role Architect",description:"Built your first role."},{id:"badge_level_5",name:"Level 5 Achiever",description:"Reached Level 5."},{id:"badge_tool_master",name:"Tool Collector",description:"Saved 5 tools to your stack."}],J=n.Ay.div.withConfig({componentId:"sc-e952f568-0"})(["display:grid;gap:var(--spacing-lg,1.5rem);"]),$=n.Ay.div.withConfig({componentId:"sc-e952f568-1"})(["display:flex;flex-wrap:wrap;align-items:flex-end;gap:var(--spacing-md,1rem);padding-bottom:var(--spacing-md,1rem);border-bottom:1px solid var(--border-color,#E5E7EB);"]),q=n.Ay.div.withConfig({componentId:"sc-e952f568-2"})(["display:flex;flex-direction:column;gap:var(--spacing-xs,0.25rem);flex-grow:1;min-width:150px;"]),H=n.Ay.label.withConfig({componentId:"sc-e952f568-3"})(["font-size:0.875rem;font-weight:500;color:var(--text-secondary,#374151);"]),Y=n.Ay.input.withConfig({componentId:"sc-e952f568-4"})(["padding:var(--spacing-sm,0.5rem);border:1px solid var(--border-color,#D1D5DB);border-radius:0.375rem;font-size:0.875rem;background-color:var(--bg-primary,white);color:var(--text-primary,#1F2937);&:focus{outline:none;border-color:var(--color-primary,#3B82F6);box-shadow:0 0 0 2px rgba(59,130,246,0.1);}"]),V=n.Ay.select.withConfig({componentId:"sc-e952f568-5"})(["padding:var(--spacing-sm,0.5rem);border:1px solid var(--border-color,#D1D5DB);border-radius:0.375rem;font-size:0.875rem;background:var(--bg-primary,white);color:var(--text-primary,#1F2937);&:focus{outline:none;border-color:var(--color-primary,#3B82F6);box-shadow:0 0 0 2px rgba(59,130,246,0.1);}"]),W=n.Ay.button.withConfig({componentId:"sc-e952f568-6"})(["padding:var(--spacing-sm,0.5rem) var(--spacing-md,1rem);background:var(--color-primary,#3B82F6);color:white;border:none;border-radius:0.375rem;font-weight:500;font-size:0.9rem;cursor:pointer;transition:all var(--transition-fast,150ms ease);position:relative;white-space:nowrap;height:fit-content;&:hover{opacity:0.9;}&:disabled{opacity:0.5;cursor:not-allowed;color:transparent;}&:disabled::after{content:'Testing...';position:absolute;inset:0;display:flex;align-items:center;justify-content:center;color:white;}"]),Q=n.Ay.div.withConfig({componentId:"sc-e952f568-7"})(["  padding:var(--spacing-md,1rem);border-radius:6px;background:var(--bg-secondary,#F9FAFB);border:1px solid var(--border-color,#E5E7EB);font-size:0.875rem;min-height:150px;"]),Z=n.Ay.h4.withConfig({componentId:"sc-e952f568-8"})(["  font-weight:600;margin-bottom:var(--spacing-sm,0.5rem);color:",";"],e=>e.color||"inherit"),K=n.Ay.pre.withConfig({componentId:"sc-e952f568-9"})(["  background:var(--bg-primary,white);padding:var(--spacing-sm,0.5rem);border-radius:4px;border:1px solid var(--border-color,#E5E7EB);overflow-x:auto;white-space:pre-wrap;word-wrap:break-word;font-family:var(--font-mono,monospace);font-size:0.8rem;color:var(--text-secondary,#6B7280);"]),ee={userId:"user-123",xp:150,level:2,badges:[G[0].id]};function er(e){let{onTest:r}=e,[a,n]=(0,s.useState)(null),[o,i]=(0,s.useState)(null),[c,d]=(0,s.useState)(ee.userId),[l,u]=(0,s.useState)("100"),[m,p]=(0,s.useState)(G[1].id),g=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(e),n(null);try{let o={type:e,params:{userId:c,...a}},i=await r(o);if(i.success){let r=i.message||"Action successful.";if("awardXp"===e){let e=parseInt(a.amount||"0",10);ee.xp+=e,ee.level=Math.floor(Math.sqrt(ee.xp/100))+1,r="Awarded ".concat(e," XP. User is now Level ").concat(ee.level,".")}else if("unlockBadge"===e){var t,s;ee.badges.includes(a.badgeId)?r="User already has badge '".concat(null===(s=G.find(e=>e.id===a.badgeId))||void 0===s?void 0:s.name,"'."):(ee.badges.push(a.badgeId),r="Badge '".concat(null===(t=G.find(e=>e.id===a.badgeId))||void 0===t?void 0:t.name,"' unlocked."))}i.message=r,i.data={...ee}}n(i)}catch(r){n({success:!1,message:r instanceof Error?r.message:"Gamification test (".concat(e,") failed unexpectedly")})}finally{i(null)}};return(0,t.jsxs)(J,{children:[(0,t.jsx)($,{children:(0,t.jsxs)(q,{children:[(0,t.jsx)(H,{htmlFor:"userId",children:"Target User ID"}),(0,t.jsx)(Y,{id:"userId",type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"Enter User ID"})]})}),(0,t.jsxs)($,{children:[(0,t.jsxs)(q,{children:[(0,t.jsx)(H,{htmlFor:"xpAmount",children:"XP Amount"}),(0,t.jsx)(Y,{id:"xpAmount",type:"number",value:l,onChange:e=>u(e.target.value),min:"0",step:"10"})]}),(0,t.jsx)(W,{onClick:()=>g("awardXp",{amount:l}),disabled:!!o||!c||!l,children:"Award XP"})]}),(0,t.jsxs)($,{children:[(0,t.jsxs)(q,{children:[(0,t.jsx)(H,{htmlFor:"badgeId",children:"Badge to Unlock"}),(0,t.jsx)(V,{id:"badgeId",value:m,onChange:e=>p(e.target.value),children:G.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,t.jsx)(W,{onClick:()=>g("unlockBadge",{badgeId:m}),disabled:!!o||!c,children:"Unlock Badge"})]}),(0,t.jsx)($,{children:(0,t.jsx)(W,{onClick:()=>g("viewProgress"),disabled:!!o||!c,children:"View Current Progress"})}),(0,t.jsx)(Q,{children:o?(0,t.jsx)("p",{children:"Performing action..."}):(()=>{if(!a)return(0,t.jsx)("p",{children:"Trigger an action to see results and updated user state."});let e=a.data?(0,t.jsx)(K,{children:JSON.stringify(a.data,null,2)}):null;return(0,t.jsxs)(s.Fragment,{children:[(0,t.jsx)(Z,{color:a.success?"var(--color-secondary, green)":"red",children:a.success?"✅ Action Succeeded":"❌ Action Failed"}),(0,t.jsx)("p",{children:a.message}),e]})})()})]})}var ea=a(108);let et=n.Ay.div.withConfig({componentId:"sc-a015141a-0"})(["padding:1rem;"]),es=n.Ay.h2.withConfig({componentId:"sc-a015141a-1"})(["font-size:1.5rem;margin-bottom:1rem;"]),en=n.Ay.button.withConfig({componentId:"sc-a015141a-2"})(["padding:0.5rem 1rem;background-color:#3B82F6;color:white;border:none;border-radius:0.25rem;cursor:pointer;&:hover{background-color:#2563EB;}"]),eo=e=>{let{onTest:r}=e,a=async()=>{console.log("Test result:",await r({type:"page_creator",data:{testType:"basic_creation"}}))};return(0,t.jsxs)(et,{children:[(0,t.jsx)(es,{children:"Page Creator Test Panel"}),(0,t.jsx)(en,{onClick:a,children:"Run Page Creation Test"})]})},ei=n.Ay.div.withConfig({componentId:"sc-f043c009-0"})(["padding:1rem;"]),ec=n.Ay.h2.withConfig({componentId:"sc-f043c009-1"})(["font-size:1.5rem;margin-bottom:1rem;"]),ed=n.Ay.button.withConfig({componentId:"sc-f043c009-2"})(["padding:0.5rem 1rem;background-color:#3B82F6;color:white;border:none;border-radius:0.25rem;cursor:pointer;&:hover{background-color:#2563EB;}"]),el=e=>{let{onTest:r}=e,a=async()=>{console.log("Test result:",await r({type:"anon_user",data:{testType:"basic_flow"}}))};return(0,t.jsxs)(ei,{children:[(0,t.jsx)(ec,{children:"Anonymous User Flow Test Panel"}),(0,t.jsx)(ed,{onClick:a,children:"Run Anonymous User Flow Test"})]})},eu=n.Ay.div.withConfig({componentId:"sc-e463abc6-0"})(["padding:1rem;"]),em=n.Ay.h2.withConfig({componentId:"sc-e463abc6-1"})(["font-size:1.5rem;margin-bottom:1rem;"]),ep=n.Ay.button.withConfig({componentId:"sc-e463abc6-2"})(["padding:0.5rem 1rem;background-color:#3B82F6;color:white;border:none;border-radius:0.25rem;cursor:pointer;&:hover{background-color:#2563EB;}"]),eg=e=>{let{onTest:r}=e,a=async()=>{console.log("Test result:",await r({type:"event_tracking",data:{testType:"basic_tracking"}}))};return(0,t.jsxs)(eu,{children:[(0,t.jsx)(em,{children:"Event Tracking Test Panel"}),(0,t.jsx)(ep,{onClick:a,children:"Run Event Tracking Test"})]})};var eh=a(7931);let eb=e=>{let r=e.success?"✅ PASS":"❌ FAIL",a=e.details?"\nDetails: ".concat(JSON.stringify(e.details,null,2)):"";return"".concat(r,": ").concat(e.message||"").concat(a)},ef=e=>{let{onTest:r}=e,[a,n]=(0,s.useState)(null),[o,i]=(0,s.useState)(!1),c=async()=>{i(!0);try{let{error:e}=await eh.N.rpc("exec_sql",{sql:"\n          CREATE TABLE IF NOT EXISTS public.user_roles (\n            id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n            user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,\n            role TEXT NOT NULL,\n            permissions TEXT[] DEFAULT '{}',\n            created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,\n            updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,\n            UNIQUE(user_id, role)\n          );\n\n          ALTER TABLE public.user_roles ENABLE ROW LEVEL SECURITY;\n\n          DROP POLICY IF EXISTS \"Admins can manage all roles\" ON public.user_roles;\n          DROP POLICY IF EXISTS \"Users can view their own roles\" ON public.user_roles;\n\n          CREATE POLICY \"Admins can manage all roles\"\n            ON public.user_roles\n            FOR ALL\n            TO authenticated\n            USING (\n              EXISTS (\n                SELECT 1 FROM public.user_roles\n                WHERE user_id = auth.uid()\n                AND role = 'admin'\n              )\n            );\n\n          CREATE POLICY \"Users can view their own roles\"\n            ON public.user_roles\n            FOR SELECT\n            TO authenticated\n            USING (user_id = auth.uid());\n\n          CREATE OR REPLACE FUNCTION public.update_updated_at()\n          RETURNS TRIGGER AS $$\n          BEGIN\n              NEW.updated_at = timezone('utc'::text, now());\n              RETURN NEW;\n          END;\n          $$ LANGUAGE plpgsql;\n\n          CREATE TRIGGER update_user_roles_updated_at\n              BEFORE UPDATE ON public.user_roles\n              FOR EACH ROW\n              EXECUTE FUNCTION public.update_updated_at();\n        "});if(e){n({success:!1,message:"Failed to execute migration",details:e});return}n({success:!0,message:"Migration completed successfully",details:{tablesCreated:["user_roles"],rlsEnabled:!0,policiesCreated:!0}})}catch(e){n({success:!1,message:"An unexpected error occurred",details:e})}finally{i(!1)}};return(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold",children:"Database Migration Test"}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)("button",{onClick:c,disabled:o,className:"px-4 py-2 bg-blue-500 text-white rounded disabled:bg-gray-400",children:o?"Running...":"Run Migrations"})}),a&&(0,t.jsx)("div",{className:"p-4 rounded ".concat(a.success?"bg-green-100":"bg-red-100"),children:(0,t.jsx)("pre",{className:"whitespace-pre-wrap",children:eb(a)})})]})},ex=async e=>{try{var r,a;let{data:t,error:s}=await eh.N.auth.signUp({email:e.email,password:e.password,options:{data:{role:"admin",...e.metadata}}});if(s)return{data:null,error:{...s,details:s.message,hint:"",code:"AUTH_ERROR"},status:400,message:"Failed to create admin account"};let{data:n,error:o}=await eh.N.from("user_roles").insert({user_id:null===(r=t.user)||void 0===r?void 0:r.id,role:"admin",permissions:(null===(a=e.metadata)||void 0===a?void 0:a.permissions)||["*"]});if(o)return{data:null,error:o,status:400,message:"Failed to assign admin role"};return{data:{user:t.user,error:null},error:null,status:200,message:"Admin account created successfully"}}catch(e){return{data:null,error:{message:e.message,details:e.stack||"",hint:"",code:"INTERNAL_ERROR"},status:500,message:"An unexpected error occurred"}}},ev=async e=>{try{let{data:r,error:a}=await eh.N.from("user_roles").select("role").eq("user_id",e).single();if(a)return{data:null,error:a,status:400,message:"Failed to verify admin role"};return{data:(null==r?void 0:r.role)==="admin",error:null,status:200}}catch(e){return{data:null,error:{message:e.message,details:e.stack||"",hint:"",code:"INTERNAL_ERROR"},status:500,message:"An unexpected error occurred"}}},ey=e=>{let{onTest:r}=e,[a,n]=(0,s.useState)(""),[o,i]=(0,s.useState)(""),[c,d]=(0,s.useState)(null),[l,u]=(0,s.useState)(!1),m=async()=>{try{let{data:e,error:r}=await eh.N.from("user_roles").select("count").limit(1);if(r){if("42P01"===r.code)return{success:!1,message:"user_roles table does not exist. Please run the migration first.",details:r};throw r}return{success:!0,message:"Table exists"}}catch(e){return{success:!1,message:"Error checking table existence",details:e}}},p=async()=>{u(!0);try{var e,r,t;let s=await m();if(!s.success){d(s);return}let n=await ex({email:a,password:o,metadata:{role:"admin",permissions:["*"]}});if(n.error){d({success:!1,message:n.message||"Failed to create admin account",details:n.error});return}let i=await ev(null===(r=n.data)||void 0===r?void 0:null===(e=r.user)||void 0===e?void 0:e.id);d({success:!0===i.data,message:i.data?"Admin account created and verified successfully":"Admin account created but role verification failed",details:{user:null===(t=n.data)||void 0===t?void 0:t.user,roleVerified:i.data}})}catch(e){d({success:!1,message:"An unexpected error occurred",details:e})}finally{u(!1)}};return(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold",children:"Admin Account Creation Test"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("input",{type:"email",placeholder:"Admin Email",value:a,onChange:e=>n(e.target.value),className:"w-full p-2 border rounded"}),(0,t.jsx)("input",{type:"password",placeholder:"Admin Password",value:o,onChange:e=>i(e.target.value),className:"w-full p-2 border rounded"}),(0,t.jsx)("button",{onClick:p,disabled:l||!a||!o,className:"px-4 py-2 bg-blue-500 text-white rounded disabled:bg-gray-400",children:l?"Creating...":"Create Admin Account"})]}),c&&(0,t.jsx)("div",{className:"p-4 rounded ".concat(c.success?"bg-green-100":"bg-red-100"),children:(0,t.jsx)("pre",{className:"whitespace-pre-wrap",children:eb(c)})})]})},ew=n.Ay.div.withConfig({componentId:"sc-88c44be6-0"})(["padding:"," ",";max-width:1200px;margin:0 auto;font-family:",";color:",";background-color:",";min-height:100vh;"],e=>e.theme.spacing.lg,e=>e.theme.spacing.xl,e=>{var r;return(null===(r=e.theme.fonts)||void 0===r?void 0:r.sans)||"var(--font-sans)"},e=>e.theme.colors.text.primary,e=>e.theme.colors.background),eA=n.Ay.header.withConfig({componentId:"sc-88c44be6-1"})(["margin-bottom:",";"],e=>e.theme.spacing.xl),eE=n.Ay.h1.withConfig({componentId:"sc-88c44be6-2"})(["font-size:2rem;font-weight:700;color:",";margin-bottom:",";"],e=>e.theme.colors.text.primary,e=>e.theme.spacing.sm),eI=n.Ay.p.withConfig({componentId:"sc-88c44be6-3"})(["font-size:1rem;color:",";"],e=>e.theme.colors.text.secondary),eC=n.Ay.div.withConfig({componentId:"sc-88c44be6-4"})(["display:flex;flex-wrap:wrap;gap:",";margin-bottom:",";border-bottom:1px solid ",";padding-bottom:",";"],e=>e.theme.spacing.sm,e=>e.theme.spacing.xl,e=>e.theme.colors.border||"var(--border-color)",e=>e.theme.spacing.md),ej=n.Ay.button.withConfig({componentId:"sc-88c44be6-5"})(["padding:"," ",";border:none;background:none;font-family:inherit;font-size:0.9rem;color:",";font-weight:",";cursor:pointer;border-bottom:2px solid ",";transition:all ",";white-space:nowrap;&:hover{color:",";}"],e=>e.theme.spacing.sm,e=>e.theme.spacing.md,e=>e.$active?e.theme.colors.primary:e.theme.colors.text.secondary,e=>e.$active?"600":"500",e=>e.$active?e.theme.colors.primary:"transparent",e=>e.theme.transitions.fast,e=>e.theme.colors.primary),eT=n.Ay.main.withConfig({componentId:"sc-88c44be6-6"})(["background:",";border-radius:8px;box-shadow:",";padding:",";min-height:300px;"],e=>e.theme.colors.background,e=>e.theme.shadows.md,e=>e.theme.spacing.lg),ek=n.Ay.div.withConfig({componentId:"sc-88c44be6-7"})(["padding:",";text-align:center;color:",";"],e=>e.theme.spacing.xl,e=>e.theme.colors.text.secondary),eF=n.Ay.div.withConfig({componentId:"sc-88c44be6-8"})(["padding:",";background:#FEF2F2;border:1px solid #FEE2E2;border-radius:6px;color:#991B1B;margin-bottom:",";"],e=>e.theme.spacing.md,e=>e.theme.spacing.md),eS=[{id:"services",label:"Services"},{id:"auth",label:"Authentication"},{id:"quote",label:"Quote Engine"},{id:"roleBuilder",label:"Role Builder"},{id:"quiz",label:"Readiness Quiz"},{id:"tools",label:"Tool Stack"},{id:"gamification",label:"Gamification"},{id:"ai",label:"AI Prompts"},{id:"pageCreator",label:"Page Creator"},{id:"style",label:"Style Guide"},{id:"anonUser",label:"Anon User Flow"},{id:"events",label:"Event Tracking"},{id:"db",label:"DB & Migrations"},{id:"admin",label:"Admin Account"}];function eN(){let[e,r]=(0,s.useState)(eS[0].id),[a,n]=(0,s.useState)(!1),[o,i]=(0,s.useState)(null),[c]=(0,s.useState)([{name:"API",status:"up",lastChecked:new Date},{name:"Database",status:"up",lastChecked:new Date},{name:"Auth Service",status:"up",lastChecked:new Date}]),d=async e=>{n(!0),i(null);try{return await new Promise(e=>setTimeout(e,1e3)),{success:!0,message:"Test completed successfully",data:{testConfig:e}}}catch(r){let e=r instanceof Error?r.message:"Test failed";return i(e),{success:!1,message:e}}finally{n(!1)}};return(0,t.jsxs)(ew,{children:[(0,t.jsxs)(eA,{children:[(0,t.jsx)(eE,{children:"ScaleMate Test Dashboard"}),(0,t.jsx)(eI,{children:"Internal platform for testing and validating features."})]}),(0,t.jsx)(eC,{children:eS.map(a=>(0,t.jsx)(ej,{$active:e===a.id,onClick:()=>r(a.id),children:a.label},a.id))}),o&&(0,t.jsxs)(eF,{children:[(0,t.jsx)("strong",{children:"Error:"})," ",o]}),(0,t.jsx)(eT,{children:(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(ek,{children:"Loading test components..."}),children:a?(0,t.jsx)(ek,{children:"Running tests..."}):(()=>{switch(e){case"services":return(0,t.jsx)(g,{});case"auth":return(0,t.jsx)(w,{onTest:d});case"quote":return(0,t.jsx)(A.A,{onTest:d});case"style":return(0,t.jsx)(E.A,{onTest:d});case"roleBuilder":return(0,t.jsx)(I.A,{onTest:d});case"quiz":return(0,t.jsx)(C.A,{onTest:d});case"tools":return(0,t.jsx)(X,{onTest:d});case"gamification":return(0,t.jsx)(er,{onTest:d});case"ai":return(0,t.jsx)(ea.A,{onTest:d});case"pageCreator":return(0,t.jsx)(eo,{onTest:d});case"anonUser":return(0,t.jsx)(el,{onTest:d});case"events":return(0,t.jsx)(eg,{onTest:d});case"db":return(0,t.jsx)(ef,{onTest:d});case"admin":return(0,t.jsx)(ey,{onTest:d});default:return(0,t.jsx)("div",{children:"Select a tab"})}})()})})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[879,697,636,593,792],()=>r(5649)),_N_E=e.O()}]);